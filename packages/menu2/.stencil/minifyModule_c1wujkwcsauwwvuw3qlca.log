var __awaiter=this&&this.__awaiter||function(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function u(e){try{a(r.next(e))}catch(e){o(e)}}function s(e){try{a(r["throw"](e))}catch(e){o(e)}}function a(e){e.done?n(e.value):i(e.value).then(u,s)}a((r=r.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(e){return function(t){return a([e,t])}}function a(u){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(o=u[0]&2?i["return"]:u[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;if(i=0,o)u=[u[0]&2,o.value];switch(u[0]){case 0:case 1:o=u;break;case 4:n.label++;return{value:u[1],done:false};case 5:n.label++;i=u[1];u=[0];continue;case 7:u=n.ops.pop();n.trys.pop();continue;default:if(!(o=n.trys,o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1];o=u;break}if(o&&n.label<o[2]){n.label=o[2];n.ops.push(u);break}if(o[2])n.ops.pop();n.trys.pop();continue}u=t.call(e,n)}catch(e){u=[6,e];i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}};System.register(["./p-89bdd8dd.system.js","@rsmdc/list/index","@rsmdc/menu-surface/foundation","@rsmdc/menu-surface/index","@rsmdc/list/foundation"],(function(e){"use strict";var t,n,r,i,o,u,s,a,c;return{setters:[function(e){t=e.r;n=e.h;r=e.H;i=e.g},function(e){o=e.RSListFoundation;u=e.RSList},function(e){s=e.RSMenuSurfaceFoundation},function(e){a=e.RSMenuSurface},function(e){c=e.RSListFoundation}],execute:function(){var l=function(e,t){l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return l(e,t)};function f(e,t){l(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var d=function(){d=Object.assign||function e(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o))t[o]=n[o]}return t};return d.apply(this,arguments)};function p(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],u;try{while((t===void 0||t-- >0)&&!(i=r.next()).done)o.push(i.value)}catch(e){u={error:e}}finally{try{if(i&&!i.done&&(n=r["return"]))n.call(r)}finally{if(u)throw u.error}}return o}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}var m=function(){function e(e){if(e===void 0){e={}}this.adapter_=e}Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:true,configurable:true});Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:true,configurable:true});Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:true,configurable:true});Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:true,configurable:true});e.prototype.init=function(){};e.prototype.destroy=function(){};return e}();var _=function(){function e(e,t){var n=[];for(var r=2;r<arguments.length;r++){n[r-2]=arguments[r]}this.root_=e;this.initialize.apply(this,h(n));this.foundation_=t===undefined?this.getDefaultFoundation():t;this.foundation_.init();this.initialSyncWithDOM()}e.attachTo=function(t){return new e(t,new m({}))};e.prototype.initialize=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}};e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured "+"foundation class")};e.prototype.initialSyncWithDOM=function(){};e.prototype.destroy=function(){this.foundation_.destroy()};e.prototype.listen=function(e,t){this.root_.addEventListener(e,t)};e.prototype.unlisten=function(e,t){this.root_.removeEventListener(e,t)};e.prototype.emit=function(e,t,n){if(n===void 0){n=false}var r;if(typeof CustomEvent==="function"){r=new CustomEvent(e,{bubbles:n,detail:t})}else{r=document.createEvent("CustomEvent");r.initCustomEvent(e,n,false,t)}this.root_.dispatchEvent(r)};return e}();var y={MENU_SELECTED_LIST_ITEM:"-selected",MENU_SELECTION_GROUP:"selectiongroup",ROOT:"rs-menu"};var E={ARIA_SELECTED_ATTR:"aria-selected",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".rs-list",SELECTED_EVENT:"rsMenu:selected"};var b=function(e){f(t,e);function t(n){var r=e.call(this,d({},t.defaultAdapter,n))||this;r.closeAnimationEndTimerId_=0;return r}Object.defineProperty(t,"cssClasses",{get:function(){return y},enumerable:true,configurable:true});Object.defineProperty(t,"strings",{get:function(){return E},enumerable:true,configurable:true});Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){return undefined},removeClassFromElementAtIndex:function(){return undefined},addAttributeToElementAtIndex:function(){return undefined},removeAttributeFromElementAtIndex:function(){return undefined},elementContainsClass:function(){return false},closeSurface:function(){return undefined},getElementIndex:function(){return-1},getParentElement:function(){return null},getSelectedElementIndex:function(){return-1},notifySelected:function(){return undefined}}},enumerable:true,configurable:true});t.prototype.destroy=function(){if(this.closeAnimationEndTimerId_){clearTimeout(this.closeAnimationEndTimerId_)}this.adapter_.closeSurface()};t.prototype.handleKeydown=function(e){var t=e.key,n=e.keyCode;var r=t==="Tab"||n===9;if(r){this.adapter_.closeSurface()}};t.prototype.handleItemAction=function(e){var t=this;var n=this.adapter_.getElementIndex(e);if(n<0){return}this.adapter_.notifySelected({index:n});this.adapter_.closeSurface();this.closeAnimationEndTimerId_=setTimeout((function(){var r=t.getSelectionGroup_(e);if(r){t.handleSelectionGroup_(r,n)}}),s.numbers.TRANSITION_CLOSE_DURATION)};t.prototype.handleSelectionGroup_=function(e,t){var n=this.adapter_.getSelectedElementIndex(e);if(n>=0){this.adapter_.removeAttributeFromElementAtIndex(n,E.ARIA_SELECTED_ATTR);this.adapter_.removeClassFromElementAtIndex(n,y.MENU_SELECTED_LIST_ITEM)}this.adapter_.addClassToElementAtIndex(t,y.MENU_SELECTED_LIST_ITEM);this.adapter_.addAttributeToElementAtIndex(t,E.ARIA_SELECTED_ATTR,"true")};t.prototype.getSelectionGroup_=function(e){var t=this.adapter_.getParentElement(e);if(!t){return null}var n=this.adapter_.elementContainsClass(t,y.MENU_SELECTION_GROUP);while(!n&&t&&!this.adapter_.elementContainsClass(t,c.cssClasses.ROOT)){t=this.adapter_.getParentElement(t);n=t?this.adapter_.elementContainsClass(t,y.MENU_SELECTION_GROUP):false}if(n){return t}else{return null}};return t}(m);var v=function(e){f(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.attachTo=function(e){return new t(e)};t.prototype.initialize=function(e,t){if(e===void 0){e=function(e){return new a(e)}}if(t===void 0){t=function(e){return new u(e)}}this.menuSurfaceFactory_=e;this.listFactory_=t};t.prototype.initialSyncWithDOM=function(){var e=this;this.menuSurface_=this.menuSurfaceFactory_(this.root_);var t=this.root_.querySelector(E.LIST_SELECTOR);if(t){this.list_=this.listFactory_(t);this.list_.wrapFocus=true}else{this.list_=null}this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)};this.handleItemAction_=function(t){return e.foundation_.handleItemAction(e.items[t.detail.index])};this.afterOpenedCallback_=function(){return e.handleAfterOpened_()};this.menuSurface_.listen(s.strings.OPENED_EVENT,this.afterOpenedCallback_);this.listen("keydown",this.handleKeydown_);this.listen(o.strings.ACTION_EVENT,this.handleItemAction_)};t.prototype.destroy=function(){if(this.list_){this.list_.destroy()}this.menuSurface_.destroy();this.menuSurface_.unlisten(s.strings.OPENED_EVENT,this.afterOpenedCallback_);this.unlisten("keydown",this.handleKeydown_);this.unlisten(o.strings.ACTION_EVENT,this.handleItemAction_);e.prototype.destroy.call(this)};Object.defineProperty(t.prototype,"open",{get:function(){return this.menuSurface_.open},set:function(e){this.menuSurface_.open=e},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"wrapFocus",{get:function(){return this.list_?this.list_.wrapFocus:false},set:function(e){if(this.list_){this.list_.wrapFocus=e}},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"items",{get:function(){return this.list_?this.list_.listElements:[]},enumerable:true,configurable:true});Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.menuSurface_.quickOpen=e},enumerable:true,configurable:true});t.prototype.setAnchorCorner=function(e){this.menuSurface_.setAnchorCorner(e)};t.prototype.setAnchorMargin=function(e){this.menuSurface_.setAnchorMargin(e)};t.prototype.getOptionByIndex=function(e){var t=this.items;if(e<t.length){return this.items[e]}else{return null}};t.prototype.setFixedPosition=function(e){this.menuSurface_.setFixedPosition(e)};t.prototype.hoistMenuToBody=function(){this.menuSurface_.hoistMenuToBody()};t.prototype.setIsHoisted=function(e){this.menuSurface_.setIsHoisted(e)};t.prototype.setAbsolutePosition=function(e,t){this.menuSurface_.setAbsolutePosition(e,t)};t.prototype.setAnchorElement=function(e){this.menuSurface_.anchorElement=e};t.prototype.getDefaultFoundation=function(){var e=this;var t={addClassToElementAtIndex:function(t,n){var r=e.items;r[t].classList.add(n)},removeClassFromElementAtIndex:function(t,n){var r=e.items;r[t].classList.remove(n)},addAttributeToElementAtIndex:function(t,n,r){var i=e.items;i[t].setAttribute(n,r)},removeAttributeFromElementAtIndex:function(t,n){var r=e.items;r[t].removeAttribute(n)},elementContainsClass:function(e,t){return e.classList.contains(t)},closeSurface:function(){return e.open=false},getElementIndex:function(t){return e.items.indexOf(t)},getParentElement:function(e){return e.parentElement},getSelectedElementIndex:function(t){var n=t.querySelector("."+y.MENU_SELECTED_LIST_ITEM);return n?e.items.indexOf(n):-1},notifySelected:function(t){return e.emit(E.SELECTED_EVENT,{index:t.index,item:e.items[t.index]})}};return new b(t)};t.prototype.handleAfterOpened_=function(){var e=this.items;if(e.length>0){e[0].focus()}};return t}(_);var S=e("rs_menu",function(){function e(e){t(this,e)}e.prototype.openeddHandler=function(){this.isOpened()};e.prototype.isOpened=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(this.opened){this.menu.classList.add("-opened")}else{this.menu.classList.remove("-opened")}return[2]}))}))};e.prototype.componentDidLoad=function(){this.menu=this.el.shadowRoot.querySelector(".rs-menu");this.rsMenu=new v(this.menu);this.isOpened()};e.prototype.render=function(){return n(r,null,n("div",{class:"rs-menu rs-menu-surface"},n("slot",null)))};Object.defineProperty(e.prototype,"el",{get:function(){return i(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{opened:["openeddHandler"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"STYLE_TEXT_PLACEHOLDER:rs-menu"},enumerable:true,configurable:true});return e}())}}}));
@import "@rsmdc/ripple/common";
@import "@rsmdc/theme/mixins";
@import "@rsmdc/theme/variables";
@import "@rsmdc/typography/mixins";
@import "@rsmdc/typography/variables";
@import "@rsmdc/shape/mixins";
@import "@rsmdc/shape/functions";
@import "./variables";
@import "./functions";

@mixin rs-text-field-form_ {

  display: inline-flex;
  position: relative;
  box-sizing: border-box;
  height: var(--rs-text-field-form--height, $rs-text-field-height);
  will-change: opacity, transform, color;

  width: var(--rs-text-field-form--width);
  overflow: var(--rs-text-field-form--overflow, hidden);
  border: var(--rs-text-field-form--border, none);
  border-radius: var(--rs-text-field-form--border-radius, 4px 4px 0 0);

  &:not(.rs-text-field--textarea) {
    display: var(--rs-text-field-form_not__textarea--display, block);
  }

  .-outlined & {
    border-radius: var(--rs-text-field__outlined-form--border-radius);
  }

  .-outlined.-dense & {
    height: 48px;
  }

  [disabled] & {
    pointer-events: none;
    border-bottom: var(--rs-text-field__disabled-form--border-bottom, none);
    border-color: $rs-text-field-outlined-disabled-border;
    background-color: $rs-text-field-disabled-background;
  }

  [disabled] &:not(.rs-text-field--textarea) {
    border-bottom-color: $rs-text-field-fullwidth-bottom-line-color;
  }

  .-outlined[disabled] {
    background-color: transparent;
  }

  .-outlined[disabled] &:not(.rs-text-field--textarea) {
    border-bottom-color: $rs-text-field-outlined-disabled-border;
    background-color: transparent;
  } 

  :not([disabled]):not(.-outlined) &:not(.rs-text-field--textarea) {
    background-color: $rs-text-field-background;
  } 

  &[dir="rtl"] {
    border-radius: var(--rs-text-field_rtl-form--border-radius, rs-shape-rtl-radius(small, false));
  }
}

@mixin rs-text-field-input_ {
  @include rs-typography(subtitle1);
  align-self: flex-end;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  background: none;
  appearance: none;
  border: none;
  line-height: var(--rs-text-field-form-input--line-height, 1.75rem);
  caret-color: var(--rs-text-field-form-input--caret-color, $rs-theme-primary);
  
  [invalid] & {
    box-shadow: none;
    caret-color: $rs-text-field-error;
  }

  .-outlined & {
    display: flex;
    border-bottom: none;
    background-color: transparent;
    z-index: 1;
  }

  .-outlined.-icon & {
    z-index: 2;
  }

  .-nolabel & {
    --rs-text-field-form-input_placeholder--opacity: 1;
  }

  .-nolabel.-outlined & {
    padding: 12px 16px 14px;
  }

  .-nolabel.-outlined.-textarea & {
    padding: 0px 16px 16px;
  }

  :not(.rs-text-field--textarea) & {
    padding: 20px 16px 6px;
  }

  :not(.rs-text-field--textarea).-nolabel & {
    padding: 16px;
  }

  :not(.rs-text-field--textarea).-outlined & {
    padding-top: 12px;
    padding-bottom: 14px;
    padding-left: var(--rs-text-field_not__textarea__outlined-form-input--padding-left, 16px);
  }

  :not(.rs-text-field--textarea).-dense & {
    padding: 12px 12px 0;
  }

  :not(.rs-text-field--textarea).-dense.-outlined & {
    padding-top: 12px;
    padding-bottom: 12px;
    padding-left: var(--rs-text-field_not__textarea__dense__outlined-form-input--padding-left, 12px);
  }

  :not(.rs-text-field--textarea).-icon &,
  :not(.rs-text-field--textarea).-outlined.-icon & {
    padding-left: 48px;
  }

  :not(.rs-text-field--textarea).-dense.-icon &,
  :not(.rs-text-field--textarea).-dense.-outlined.-icon & {
    padding-left: 44px;
  }

  :not([disabled]) & {
    background-color: transparent;
    color: var(--rs-text-field_not__disabled-form-input--color, $rs-text-field-ink-color);
  }

  [disabled] &,
  [disabled]:not(.-outlined):not(.rs-text-field--textarea) &,
  [disabled]:not(.-outlined):not(.rs-text-field--textarea) &:hover {
    color: $rs-text-field-disabled-ink-color;
  }

  &::placeholder {
    transition: rs-text-field-transition(opacity, $duration: 67ms);
    color: $rs-text-field-placeholder-ink-color;
    opacity: var(--rs-text-field-form-input_placeholder--opacity, 0);
    transition-delay: var(--rs-text-field-form-input_placeholder--transition-delay);
    transition-duration: var(--rs-text-field-form-input_placeholder--transition-duration);
  }

  &:-ms-input-placeholder {
    color: $rs-text-field-placeholder-ink-color !important;
  }

  &:focus {
    outline: none;
  }

  &:focus::placeholder {
    transition-delay: 40ms;
    transition-duration: 110ms;
    opacity: 1;
  }

  &:-webkit-autofill {
    z-index: auto !important;
  }
}
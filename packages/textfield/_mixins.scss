@import "@rsmdc/animation/variables";
@import "@rsmdc/ripple/common";
@import "@rsmdc/rtl/mixins";
@import "@rsmdc/theme/mixins";
@import "@rsmdc/theme/variables";
@import "@rsmdc/typography/mixins";
@import "@rsmdc/typography/variables";
@import "@rsmdc/shape/mixins";
@import "@rsmdc/shape/functions";
@import "icon/variables";
@import "./variables";
@import "./functions";

@import "./rs-mixins";
@import "./notched-outline/rs-mixins";

@mixin rs-text-field-dense_ {
  --rs-form-label__floatinglabel__floatabove--transform: #{rs-form-label-floatinglabel-position($rs-text-field-dense-label-position-y, 0%, $rs-text-field-dense-label-scale)};
  --rs-form-label__floatinglabel_rtl__floatabove--transform: #{rs-form-label-floatinglabel-rtl-position($rs-text-field-dense-label-position-y, 0%, $rs-text-field-dense-label-scale)};
  --rs-form-label__floatinglabel__shake--animation: #{rs-form-label-floatinglabel-shake-animation(text-field-dense)};

  --rs-text-field-form_not__textarea-form--padding-top: 12px;
  --rs-text-field-form_not__textarea-input--padding-bottom: 0;
  --rs-text-field-form_not__textarea-input--padding-right: 12px;
  --rs-text-field-form_not__textarea-inputarea-input--padding-left: 12px;
  --rs-form-label__floatinglabel--color--font-size: .813rem;
  --rs-notched-outline__floatabove-leading-notch-form-label__floatinglabel--font-size: .813rem;
}

@mixin rs-text-field-outlined-dense_ {
  @include rs-notched-outline-floating-label-float-position($rs-text-field-outlined-dense-label-position-y, 0%, $rs-text-field-dense-label-scale);
  --rs-form-label__floatinglabel__shake--animation: #{rs-form-label-floatinglabel-shake-animation(text-field-outlined-dense)};
  --rs-form-label__floatinglabel__outlined--height: 48px;
  --rs-text-field-form_not__textarea-form--padding-top: 12px;
  --rs-text-field-form_not__textarea-input--padding-bottom: 7px;
  --rs-text-field-form_not__textarea-input--padding-right: 12px;
  --rs-text-field-form_not__textarea-inputarea-input--padding-left: 12px;
  --rs-form-label__floatinglabel--top: 14px;
  --rs-form-label__floatinglabel--top: 14px;
  --rs-text-field-icon--top: 12px;
}

@mixin rs-text-field-form_ {
  @include rs-ripple-surface;
  @include rs-ripple-radius-bounded;

  display: inline-flex;
  position: relative;
  box-sizing: border-box;
  height: $rs-text-field-height;
  will-change: opacity, transform, color;

  width: var(--rs-text-field-form--width);
  overflow: var(--rs-text-field-form--overflow, hidden);
  border: var(--rs-text-field-form--border, none);
  border-radius: var(--rs-text-field-form--border-radius, 4px 4px 0 0);

  &:not(.rs-text-field--textarea) {
    display: var(--rs-text-field-form_not__textarea--display, block);
  }

  .-disabled & {
    pointer-events: none;
    border-bottom: var(--rs-text-field__disabled-form--border-bottom, none);
    border-color: $rs-text-field-outlined-disabled-border;
    background-color: var(--rs-text-field__disabled-form--background-color, $rs-text-field-disabled-background);
  }

  .-disabled &:not(.rs-text-field--textarea) {
    border-bottom-color: var(--rs-text-field__disabled-form_not__textarea--border-bottom-color, $rs-text-field-fullwidth-bottom-line-color);
  } 

  :not(.-disabled) & {
    border-color: var(--rs-text-field_not__disabled-form--border-color, $rs-text-field-outlined-idle-border);
  }

  :not(.-disabled):hover & {
    border-color: var(--rs-text-field_not__disabled_hover-form--border-color, $rs-text-field-outlined-hover-border);
  }

  :not(.-disabled) &:not(.rs-text-field--textarea) {
    background-color: var(--rs-text-field_not__disabled-form_not__textarea--background-color, $rs-text-field-background);
  } 

  &[dir="rtl"] {
    border-radius: var(--rs-text-field_rt-form--border-radius, rs-shape-rtl-radius(small, false));
  }

  // ripple
  &::before{
    background-color: var(--rs-ripple_before--background-color, $rs-text-field-ink-color);
    content: var(--rs-ripple_before--content, '');
  }

  &::after {
    background-color: var(--rs-ripple_after--background-color, $rs-text-field-ink-color);
    content: var(--rs-ripple_after--content, '');
  }

  &:hover::before {
    opacity: var(--rs-ripple_hover_before--opacity, rs-states-opacity($rs-text-field-ink-color, hover));
  }

  &:not(.rs-ripple-upgraded):focus::before { // @mixin rs-states-focus-opacity„ÅÆfalse
    transition-duration: var(--rs-ripple_not-upgraded_focus_before--transition-duration, 75ms);
    opacity: var(--rs-ripple_not-upgraded_focus_before--opacity, rs-states-opacity($rs-text-field-ink-color, focus));
  }

  &.rs-ripple-upgraded--background-focused::before {
    transition-duration: var(--rs-upgraded_-background-focused_before--transition-duration, 75ms);
    opacity: var(--rs-upgraded_-background-focused_before--opacity, rs-states-opacity($rs-text-field-ink-color, focus));
  }
}

@mixin rs-text-field-input_ {
  @include rs-typography(subtitle1);
  align-self: flex-end;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  background: none;
  appearance: none;
  border: none;
  z-index: var(--rs-text-field-form-input--z-index);
  display: var(--rs-text-field-form-input--display);
  background-color: var(--rs-text-field-form-input--background-color);
  caret-color: var(--rs-text-field-form-input--caret-color, $rs-theme-primary);

  .-invalid & {
    box-shadow: none;
    caret-color: $rs-text-field-error;
  }

  .-nolabel & {
    padding: 16px;
    --rs-text-field-form-input_placeholder--opacity: 1;
  }

  .-nolabel.-outlined & {
    padding: 12px 16px 14px;
  }

  .-nolabel.-outlined.-textarea & {
    padding: 0px 16px 16px;
  }

  :not(.rs-text-field--textarea) & {
    padding-top: var(--rs-text-field-form_not__textarea-form--padding-top, 20px);
    padding-bottom: var(--rs-text-field-form_not__textarea-input--padding-bottom, 6px);
    padding-right: var(--rs-text-field-form_not__textarea-input--padding-right, 16px);
    padding-left: var(--rs-text-field-form_not__textarea-inputarea-input--padding-left, 16px);
  }

  :not(.-disabled) & {
    background-color: var(--rs-text-field_not__disabled-form-input--background-color);
    color: var(--rs-text-field_not__disabled-form-input--color, $rs-text-field-ink-color);
  }

  .-disabled &,
  .-disabled:not(.-outlined):not(.rs-text-field--textarea) &,
  .-disabled:not(.-outlined):not(.rs-text-field--textarea) &:hover {
    color: $rs-text-field-disabled-ink-color;
  }

  &::placeholder {
    transition: rs-text-field-transition(opacity, $duration: 67ms);
    color: $rs-text-field-placeholder-ink-color;
    opacity: var(--rs-text-field-form-input_placeholder--opacity, 0);
    transition-delay: var(--rs-text-field-form-input_placeholder--transition-delay);
    transition-duration: var(--rs-text-field-form-input_placeholder--transition-duration);
  }

  &:-ms-input-placeholder {
    color: $rs-text-field-placeholder-ink-color !important;
  }

  &:focus {
    outline: none;
  }

  &:focus::placeholder {
    transition-delay: 40ms;
    transition-duration: 110ms;
    opacity: 1;
  }

  &:-webkit-autofill {
    z-index: auto !important;
  }
}

// stylelint-disable plugin/selector-bem-pattern
.rs-text-field--with-leading-icon.rs-text-field--dense .rs-text-field__icon,
.rs-text-field--with-trailing-icon.rs-text-field--dense .rs-text-field__icon {
  bottom: 16px;
  transform: scale(.8);
}
// stylelint-enable plugin/selector-bem-pattern
